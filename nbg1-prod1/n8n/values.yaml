n8n:
  ingress:
    enabled: false
    className: tailscale
    hosts:
      - host: n8n
        paths:
          - path: /
            pathType: Prefix
    tls:
      - secretName: n8n-tls
        hosts:
          - n8n

  main:
    # Enable Prometheus metrics
    config:
      n8n:
        host: n8n.marlin-tet.ts.net
        protocol: https
        editor:
          baseUrl: https://n8n.marlin-tet.ts.net
        metrics: true
      webhook:
        url: https://n8n.marlin-tet.ts.net

    # Enable Prometheus scraping
    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "5678"
      prometheus.io/path: "/metrics"

    persistence:
      enabled: true
      type: dynamic
      size: 1Gi

    resources:
      requests:
        cpu: 250m
        memory: 500Mi
      limits:
        memory: 1000Mi
